# 更新日志

## v2.0.0 (2024-10-22)

### 🤖 AI 运动助手（重大新功能）

#### 核心功能
- ✨ 全新 AI 助手页面，支持智能对话分析运动数据
- 📊 自动分析最近30天运动数据，提供数据摘要给 AI 作为上下文
- 💬 类似 ChatGPT 的聊天界面，流畅的对话体验
- 🎯 快速问题按钮：月度数据分析、训练计划制定、配速分析、改进建议
- 🔄 一键清空对话，重新开始新的对话

#### AI 配置管理
- ⚙️ 在设置页面配置 AI 参数：API URL、API Key、模型名称
- 💾 配置信息加密保存在本地 config.json
- 🔧 支持多种 AI 服务：
  - OpenAI (GPT-3.5, GPT-4)
  - Claude (Anthropic)
  - Ollama (本地免费部署)
  - 其他兼容 OpenAI API 的服务

#### Markdown 格式支持
- 📝 完整的 Markdown 格式渲染：
  - 标题（H1-H4）- 层级清晰，加粗显示
  - 列表（有序/无序）- 正确缩进，结构化展示
  - 代码块和行内代码 - 语法高亮，等宽字体
  - 表格 - 完整边框，数据对比清晰
  - 引用块 - 左侧颜色边框，斜体显示
  - 加粗、斜体、链接、水平线等
- 🎨 深色/浅色模式完美适配所有 Markdown 元素

#### 用户体验
- 💬 Enter 发送消息，Shift+Enter 换行
- ⌨️ 输入框自动调整高度（最大120px）
- 🔄 思考中动画（三个跳动的点）
- 📍 消息自动滚动到底部
- ⚡ 发送中状态（禁用按钮防止重复提交）
- ❌ 友好的错误提示，帮助用户排查问题

#### 数据隐私
- 🔒 只发送统计数据（总数、平均值），不发送详细体感记录
- 💾 API Key 加密保存在本地
- 🏠 支持 Ollama 本地部署，数据完全不上传

#### 技术实现
- 📝 新增代码约 800+ 行（HTML/CSS/JavaScript）
- 🎨 新增 380+ 行 CSS 样式（聊天界面 + Markdown）
- ⚙️ 新增 IPC 通信接口：get-ai-config, save-ai-config
- 🔧 增强 formatAIMessage 函数，支持完整 Markdown 解析

---

## v1.2.3

### 🎯 用户体验优化

#### 时长输入方式改进
- ⏱️ 跑步时长输入改为时间选择器（与跑步时间保持一致）
- 🎨 从文本框 `type="text"` 改为时间选择器 `type="time"`
- ✨ 支持精确到秒的时间选择（`step="1"`）
- 🖱️ 点击输入框自动弹出时间选择界面，操作更直观
- 🚀 提升用户输入效率，减少格式错误

#### 技术改进
- 🔧 更新 `timeToSeconds()` 函数以正确处理时间选择器格式
- 📝 支持 HH:MM 和 HH:MM:SS 两种时间格式
- ✅ 保持数据兼容性，不影响已有数据

#### 版本信息
- 📦 更新应用版本号为 1.2.3

---

## v1.2.2 (2025-10-15)

### 🎨 深色模式侧边栏优化

#### 侧边栏颜色适配
- 🌙 深色模式下侧边栏不再保持亮色，改为基于主题颜色的深色变体
- 🎨 新增5种颜色的深色变体（紫色、蓝色、绿色、橙色、粉色）
- 🔄 浅色模式：明亮渐变色侧边栏 + 白色背景
- 🌃 深色模式：深色渐变侧边栏 + 深色背景（非纯黑，保持颜色特征）

#### 颜色映射
- 💜 紫色：`#667eea` → `#4a5bb8`（深色版）
- 💙 蓝色：`#3498db` → `#2574a9`（深色版）
- 💚 绿色：`#2ecc71` → `#229954`（深色版）
- 🧡 橙色：`#e67e22` → `#ba6516`（深色版）
- 💗 粉色：`#e91e63` → `#c2185b`（深色版）

#### 配置优化
- 📝 .gitignore 新增学习文档.md

#### 技术改进
- 🎨 CSS 新增：+35 行深色模式颜色变量
- 📦 代码变更：+37 行 / -1 行

---

## v1.2.1

### 🎨 界面优化与体验改进

#### 深色模式完善
- 🌙 优化深色模式下的界面元素颜色
- 📝 输入框背景改为深色（#1e1f20），不再刺眼
- 📋 卡片和容器背景统一为 #242526
- 📊 表格、图表、按钮等 15+ 种元素深色适配
- ✨ 新增 140+ 行深色模式专用样式

#### 图表展示优化
- 🎯 图表选择改为单选模式（之前为多选）
- 🔘 移除复选框，改用优雅的按钮设计
- ✅ 点击按钮只显示对应图表，界面更简洁
- 🎨 激活状态：渐变色背景 + 左侧指示条
- 📍 默认显示配速趋势图

#### Bug 修复
- 🐛 修复图表选择器中盾牌和跑步人图标不显示的问题
- 🎨 正确设置 SVG 图标的 fill 和 stroke 属性
- 🔍 添加 `icon-stroke-only` 类区分不同类型图标
- 🔧 修复统计页面图表无法显示的问题（更新图表渲染逻辑）

#### 文档优化
- 📝 重写 README.md 文档，内容更聚焦和实用
- 📋 将版本更新历史移至专门的 CHANGELOG.md
- ✨ 增强功能特性介绍，添加详细使用说明
- 📖 补充技术栈说明和数据格式示例

#### 技术改进
- 📦 代码变更：+232 行 / -92 行
- 🎨 CSS 优化：+243 行（含深色模式样式）
- 🔧 JavaScript 重构：图表选择逻辑更清晰
- 🏗️ HTML 结构：用按钮替换复选框

---

## v1.2.0

### 🎨 界面美化大更新

#### 新增功能

**1. 主题系统**
- ✨ 深色/浅色模式切换
- 🎨 5种主题颜色（紫色、蓝色、绿色、橙色、粉色）
- 💾 主题偏好自动保存

**2. 热力图日历**
- 📊 类似 GitHub 的运动数据可视化
- 📅 显示过去 364 天的运动记录
- 🎯 5级强度显示
- 🖱️ 交互式工具提示和点击跳转

**3. 表格功能增强**
- 🔍 智能搜索（日期、时间、体感记录）
- 🔢 多列排序（8个字段可排序）
- ⬆️ 排序图标实时反馈

**4. 空状态优化**
- 🎭 友好的无数据引导界面
- 🖼️ 精美的空状态插图
- 🚀 快速操作按钮

**5. 动画优化**
- ✨ 丝滑的页面切换效果
- 🎬 骨架屏加载动画
- 🌊 平滑的缓动曲线

#### 技术改进

- 📈 新增代码：1129 行（+1129 / -23）
- 🎨 CSS 变量系统支持主题切换
- 💾 localStorage 持久化用户偏好
- ⚡ 优化的动画性能
- ✅ 完全向后兼容

#### 文件变更

```
README.md                   | +54 行
package.json                | v1.1.1 → v1.2.0
src/renderer/css/styles.css | +574 行
src/renderer/index.html     | +156 行
src/renderer/js/app.js      | +366 行
```

---

## v1.1.1

### 代码优化与性能提升

- 主进程代码重构
- DOM 缓存机制
- CSS 变量系统
- 函数优化精简
- 代码行数减少约 15%

---

## v1.1.0

### 图表数据显示优化

- 智能数据过滤
- 图表数据处理逻辑优化

---

## v1.0.2

### 用户体验优化

- 图表自动滚动定位
- 历史记录表格美化

---

## v1.0.1

### Bug 修复

- 修复表单输入框失焦问题
- Toast 提示系统
- 自定义确认对话框
