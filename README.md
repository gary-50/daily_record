# 体育锻炼记录系统

基于 Electron 的桌面应用，用于记录和管理个人体育锻炼数据，支持跑步、力量训练等多种运动类型。

## ✨ 功能特性

### 📝 记录管理
- **多维度记录**：支持跑步时间、时长、距离、配速等跑步数据
- **力量训练**：俯卧撑、深蹲、登山跑等力量训练项目记录
- **体感日志**：记录每次锻炼的感受和状态
- **历史查询**：查看和管理所有锻炼历史记录
- **智能搜索**：快速搜索日期、时间或体感记录
- **多列排序**：支持按日期、时长、距离等多个字段排序

### 📊 数据可视化
- **趋势图表**：折线图/柱状图展示锻炼数据趋势
- **配速分析**：跑步配速变化曲线
- **力量训练统计**：俯卧撑、深蹲、登山跑等数据对比
- **跑步数据分析**：距离、时长等综合统计
- **热力图日历**：类似 GitHub 的全年运动热力图（364天）
- **灵活时间范围**：按天/按周/按月统计，自定义日期范围

### 🎨 主题系统
- **深色/浅色模式**：护眼深色模式和清爽浅色模式
- **5种主题颜色**：紫色、蓝色、绿色、橙色、粉色可选
- **偏好记忆**：主题设置自动保存，下次启动自动应用

### 🤖 AI 运动助手（新功能）
- **智能对话**：基于运动数据的 AI 对话分析
- **数据分析**：自动分析最近30天运动数据并提供专业建议
- **训练计划**：根据个人数据制定个性化训练计划
- **Markdown 格式**：支持完整的 Markdown 格式回复（标题、列表、表格、代码块等）
- **多 API 支持**：兼容 OpenAI、Claude、Ollama 等多种 AI 服务
- **隐私保护**：配置本地存储，支持本地 AI 部署（Ollama）

### 💾 数据管理
- **本地存储**：数据完全离线存储，无需联网
- **自定义路径**：可自由选择数据文件存储位置
- **数据迁移**：更改存储位置时自动复制现有数据
- **JSON格式**：易于备份和手动编辑

## 🚀 快速开始

### 环境要求
- Node.js 14.0 或更高版本
- npm 或 yarn 包管理器

### 安装依赖

```bash
npm install
```

### 运行应用

```bash
# 生产模式
npm start

# 开发模式（带开发者工具）
npm run dev
```

### 打包发布

```bash
# 构建所有平台
npm run dist

# 仅构建 Windows
npm run dist:win

# 构建简化版（便携版，无签名）
npm run dist:simple

# 仅构建 macOS
npm run dist:mac

# 仅构建 Linux
npm run dist:linux
```

打包后的文件会在 `dist` 目录中。

## 📁 项目结构

```
record_exercise/
├── src/                          # 源代码目录
│   ├── main/                     # Electron 主进程
│   │   ├── main.js              # 应用入口、窗口管理、IPC通信
│   │   └── preload.js           # 安全的 IPC 桥接层
│   └── renderer/                 # 渲染进程（前端）
│       ├── index.html           # 应用界面 HTML
│       ├── css/
│       │   └── styles.css       # 样式文件（含主题系统）
│       └── js/
│           └── app.js           # 前端业务逻辑
├── exercise-data.json            # 运动数据文件（首次运行后生成）
├── package.json                  # 项目配置和依赖
├── package-lock.json
├── CHANGELOG.md                  # 版本更新日志
└── README.md                     # 项目文档
```

## 💾 数据存储

### 默认存储位置

应用使用 JSON 文件存储所有数据，默认位置：

- **Windows**: `%APPDATA%\exercise-tracker-electron\exercise-data.json`
- **macOS**: `~/Library/Application Support/exercise-tracker-electron/exercise-data.json`
- **Linux**: `~/.config/exercise-tracker-electron/exercise-data.json`

配置文件（config.json）存储在相同目录下，记录用户的自定义设置。

### 自定义存储位置

1. 打开应用，点击左侧菜单的 **"设置"**
2. 在"数据存储位置"部分，点击 **"更改存储位置"** 按钮
3. 选择您想要保存数据文件的位置
4. 应用会自动将现有数据复制到新位置

**注意事项：**
- 更改存储位置后，原有数据会被自动复制到新位置
- 配置信息存储在默认的应用数据目录中
- 建议选择一个安全且方便备份的位置（如云同步文件夹）

### 数据格式

数据以 JSON 数组格式存储，每条记录包含：

```json
[
  {
    "id": 1,
    "date": "2025-10-15",
    "runTime": "06:30",
    "runDurationSeconds": 1800,
    "runDistance": 5.2,
    "pushups": 50,
    "squats": 30,
    "mountainClimbers": 40,
    "feeling": "今天状态不错，跑步轻松完成"
  }
]
```

## 🛠️ 技术栈

### 核心框架
- **Electron** ^28.0.0 - 跨平台桌面应用框架
- **Chart.js** ^4.4.0 - 数据可视化图表库

### 前端技术
- **HTML5** - 语义化标签，现代化界面
- **CSS3** - CSS 变量、Grid、Flexbox、动画
- **JavaScript (ES6+)** - 模块化、箭头函数、Promise/async-await

### 开发工具
- **Electron Builder** - 应用打包和分发
- **Node.js** - 运行时环境

### 特色技术
- **CSS 主题系统**：基于 CSS 变量实现动态主题切换
- **IPC 通信**：主进程与渲染进程安全通信
- **Context Isolation**：安全的进程隔离机制
- **LocalStorage**：主题偏好持久化

## 🎯 使用说明

### 添加记录
1. 在左侧菜单选择 **"添加记录"**
2. 填写锻炼数据：
   - 基本信息：日期、跑步时间
   - 跑步数据：时长（格式：时:分:秒）、距离（公里）
   - 力量训练：俯卧撑、深蹲、登山跑（个数）
   - 体感记录：记录当天的锻炼感受
3. 点击 **"保存记录"** 按钮

### 查看历史
1. 在左侧菜单选择 **"历史记录"**
2. 使用搜索框快速查找记录
3. 点击表头可按该列排序
4. 点击 **"删除"** 按钮可删除记录

### 数据统计
1. 在左侧菜单选择 **"数据统计"**
2. 查看热力图了解全年运动分布
3. 选择统计周期：按天/按周/按月
4. 选择图表类型：折线图/柱状图
5. 设置日期范围后点击 **"更新"** 刷新图表
6. 点击图表选择按钮查看不同维度的数据

### AI 运动助手
1. 在左侧菜单选择 **"AI 助手"**
2. 首次使用需在 **"设置"** 页面配置 AI：
   - **API 地址**：如 `https://api.openai.com/v1/chat/completions`（OpenAI）或 `http://localhost:11434/api/chat`（Ollama本地）
   - **API Key**：您的 API 密钥
   - **模型名称**：如 `gpt-4`、`llama3` 等
3. 与 AI 对话：
   - 直接输入问题（Enter 发送，Shift+Enter 换行）
   - 点击快速问题按钮
   - 示例问题："分析一下我这个月的跑步数据"、"帮我制定下周的训练计划"
4. AI 会根据您的运动数据提供专业分析和建议
5. 点击右上角 **"清空对话"** 可重新开始

**支持的 AI 服务：**
- OpenAI（GPT-3.5/GPT-4）
- Claude（Anthropic）
- Ollama（本地免费，需安装 [Ollama](https://ollama.ai/)）
- 其他兼容 OpenAI API 的服务

### 个性化设置
1. 在侧边栏底部的 **"主题切换器"** 中：
   - 切换浅色/深色模式
   - 选择喜欢的主题颜色
2. 在 **"设置"** 页面中：
   - 配置 AI 助手参数
   - 查看当前数据文件路径
   - 更改数据存储位置

## 🔒 安全与隐私

- ✅ 数据完全本地存储，不上传到任何服务器
- ✅ 无需注册账号，无需联网使用
- ✅ Context Isolation 确保渲染进程安全
- ✅ 开源代码，可自行审计

## 📝 更新日志

详细的版本更新记录请查看 [CHANGELOG.md](CHANGELOG.md)。

## 📄 许可证

ISC License

---

**Made with ❤️ for fitness enthusiasts**
